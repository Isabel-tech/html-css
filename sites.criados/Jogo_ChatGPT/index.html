<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Pinball</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.54.0/phaser.min.js"></script>
    <script>
        // Configuração do jogo
        var config = {
            type: Phaser.AUTO,
            width: 640,
            height: 480,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 300 },
                    debug: false
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        // Instanciando o jogo
        var game = new Phaser.Game(config);

        // Variáveis globais
        var ball;
        var paddle;
        var bricks;
        var score = 0;
        var scoreText;

        function preload() {
            // Pré-carregamento das imagens
            this.load.image('ball', 'ball.png');
            this.load.image('paddle', 'paddle.png');
            this.load.image('brick', 'brick.png');
        }

        function create() {
            // Criação dos elementos do jogo

            // Adicionando a bola
            ball = this.physics.add.image(320, 400, 'ball').setScale(0.15);
            ball.setCollideWorldBounds(true);
            ball.setBounce(1, 1);

            // Adicionando a pá
            paddle = this.physics.add.image(320, 450, 'paddle').setScale(0.2);
            paddle.setImmovable();

            // Criando os blocos
            bricks = this.physics.add.group({
                key: 'brick',
                repeat: 5,
                setXY: { x: 80, y: 100, stepX: 100 }
            });

            // Adicionando colisões
            this.physics.add.collider(ball, paddle, paddleHit, null, this);
            this.physics.add.collider(ball, bricks, brickHit, null, this);

            // Adicionando eventos de entrada
            this.input.on('pointermove', function (pointer) {
                // Movimentando a pá com o mouse
                paddle.x = pointer.x;
                if (paddle.x < 32) {
                    paddle.x = 32;
                } else if (paddle.x > 608) {
                    paddle.x = 608;
                }
            }, this);

            // Exibindo a pontuação
            scoreText = this.add.text(16, 16, 'Score: 0', { fontSize: '32px', fill: '#000' });
        }

        function update() {
            // Atualizando o jogo

            // Verificando se a bola saiu da tela
            if (ball.y > 480) {
                ball.disableBody(true, true);
                alert('Game Over!');
                location.reload();
            }
        }

        function paddleHit() {
            // Função chamada quando a bola colide com a pá
            ball.setVelocityY(-300);
        }

        function brickHit(ball, brick) {
            // Função chamada quando a bola colide com um bloco

            // Removendo o bloco
            brick.disableBody(true, true);

            // Atualizando a pontuação
           score += 10;
		   scoreText.setText('Score: ' + score);

		           // Verificando se todos os blocos foram destruídos
        if (bricks.countActive() === 0) {
            // Ganhou o jogo!
            ball.disableBody(true, true);
            alert('You Win!');
            location.reload();
        }
    }
</script>

